!function t(a,e,r){function n(o,l){if(!e[o]){if(!a[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=e[o]={exports:{}};a[o][0].call(d.exports,function(t){var e=a[o][1][t];return n(e?e:t)},d,d.exports,t,a,e,r)}return e[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,a,e){function r(t,a,e){for(var r=-1,n=0;n<t.length-1;n++){var i=a(t[n]),o=a(t[n+1]),l=e>=i,s=o>=e;l&&s&&(Δ1=Math.abs(a(t[n])-e),Δ2=Math.abs(a(t[n+1])-e),r=Δ1<Δ2?n:n+1)}return r}function n(t,a,e,r,n){var i=d3.select("#tooltip");if(i.empty()){i=r.append("g").attr("id","tooltip").attr("class","tooltip"),i.append("circle").attr("id","tooltip-circle");var o=i.append("g").attr("id","label");o.append("text").attr("text-anchor","middle").attr("id","label-text")}if(-1==e)return void i.attr("visibility","hidden");i.attr("visibility","visible"),d3.select("#label-text").text(n(t[e])).attr("x",0).attr("y",-10);var l=a(t[e]);i.attr("transform","translate("+l[0]+","+l[1]+")")}var i=d3.time.format("%Y-%m-%d"),o=d3.time.scale(),l=d3.scale.linear(),s=850,c=400,d={xstart:50,ytop:0,xend:0,ybottom:50},u={x:0,y:0},p=1,f=[];o.range([0,s-d.xstart-d.xend]),l.range([c-d.ytop-d.ybottom,0]);var x=d3.svg.axis().scale(o).orient("bottom").ticks(5),v=d3.svg.axis().scale(l).orient("left").ticks(5);d3.csv("data.csv",function(t,a){function e(){w.call(x),k.call(v),u.x=d3.event.translate[0],u.y=d3.event.translate[1],p=d3.event.scale,M.selectAll("circle.data-point").attr("cx",function(t){return o(t.Date)}).attr("cy",function(t){return l(t.Mean)}),m()}function m(){var t=[];t[0]=f[0]-d.xstart,t[1]=f[1]-d.ytop;var e=o.invert(t[0]),i=r(a,function(t){return t.Date},e);n(a,function(t){return[o(t.Date),l(t.Mean)]},i,d3.select("#graph"),function(t){return Math.round(1e3*t.Mean)/1e3})}a.sort(function(t,a){return t.Date<a.Date?-1:t.Date>a.Date?1:0});for(var y=0;y<a.length;y++)a[y].Date=i.parse(a[y].Date),a[y].Open=parseFloat(a[y].Open),a[y].Close=parseFloat(a[y].Close),a[y].Mean=(a[y].Open+a[y].Close)/2;var h=[];h[0]=d3.min(a,function(t){return t.Date}),h[1]=d3.max(a,function(t){var a=t.Date.getTime()-h[0].getTime();return a*=1.1,new Date(a+h[0].getTime())});var g=[];g[0]=d3.min(a,function(t){return t.Mean}),g[1]=d3.max(a,function(t){var a=t.Mean-g[0];return g[0]+1.1*a}),o.domain(h),l.domain(g);var b=d3.behavior.zoom().x(o).y(l).scaleExtent([1,50]).on("zoom",e),D=null,M=d3.select("#visualization").attr("width",s).attr("height",c).call(b);M.append("mask").attr("id","mask").append("rect").attr("x",0).attr("y",0).attr("width",s-d.xstart-d.xend).attr("height",c-d.ytop-d.ybottom).attr("fill","white"),D=M.append("g").attr("id","graph").attr("transform","translate("+d.xstart+","+d.ytop+")").attr("mask","url(#mask)").selectAll("circle").data(a).enter().append("circle").attr("class","data-point").attr("cx",function(t){return o(t.Date)}).attr("cy",function(t){return l(t.Mean)});var w=M.append("g").attr("class","axis axis-x").attr("transform","translate("+d.xstart+","+(c-d.ybottom)+")").call(x),k=M.append("g").attr("class","axis axis-y").attr("transform","translate(50,0)").call(v);M.append("rect").attr("id","overlay").attr("x",d.xstart).attr("y",d.ytop).attr("width",s-d.xstart-d.xend).attr("height",c-d.ytop-d.ybottom).on("mousemove",function(){f=d3.mouse(this),m()})})},{}]},{},[1]);
//# sourceMappingURL=script.js.map
